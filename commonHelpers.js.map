{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst KEY = '43794074-5ff9b3f6f51ca0335da2b7303';\nconst IMAGE_TYPE = 'photo';\nconst ORIENTATION = 'horizontal';\nconst SAFESEARCH = true;\nconst PER_PAGE = 15;\n\nexport async function imagesFetch(value, page) {\n  try {\n    const { data } = await axios.get(\n      `${BASE_URL}?key=${KEY}&q=${value}&image_type=${IMAGE_TYPE}&orientation=${ORIENTATION}&safesearch=${SAFESEARCH}&page=${page}&per_page=${PER_PAGE}`\n    );\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = new SimpleLightbox('.gallery-link');\n\nexport const createMarcup = (list, tag) => {\n  const marcup = list\n    .map(image => {\n      return ` <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\" data-lightbox=\"gallery\">\n    <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n          <ul class=\"stats-block\">\n            <li>\n              <span>Likes</span>\n              <span>${image.likes}</span> \n            </li>\n            <li>\n              <span>Views</span>\n              <span>${image.views}</span>\n            </li>\n            <li>\n              <span>Coments</span>\n              <span>${image.comments}</span>\n            </li>\n            <li>\n              <span>Download</span>\n              <span>${image.downloads}</span>\n            </li>\n          </ul>\n        </a>\n      </li>`;\n    })\n    .join('');\n  tag.insertAdjacentHTML('beforeend', marcup);\n  gallery.refresh();\n};\n","import { imagesFetch } from './js/pixabay-api';\nimport { createMarcup } from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector('#search-form');\nconst galleryList = document.querySelector('#gallery');\nconst loaderEl = document.querySelector('.loader');\nconst loadMore = document.querySelector('#loadMore');\nlet page = 1;\nlet valueSearch = '';\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  valueSearch = event.target.elements.searchInput.value.trim();\n\n  if (!valueSearch) {\n    galleryList.innerHTML = '';\n    iziToast.show({\n      message: 'Please enter text to find something!',\n      position: 'topRight',\n      timeout: 2000,\n      color: 'red',\n    });\n    return;\n  }\n\n  galleryList.innerHTML = '';\n  loaderEl.classList.remove('is-hidden');\n  page = 1;\n  try {\n    const response = await imagesFetch(valueSearch, page);\n\n    searchForm.searchInput.value = '';\n    galleryList.innerHTML = '';\n\n    if (!response.hits.length) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        timeout: 2000,\n        color: 'red',\n      });\n      loadMore.classList.add('is-hidden');\n      galleryList.innerHTML = '';\n      loaderEl.classList.add('is-hidden');\n      return;\n    }\n\n    createMarcup(response.hits, galleryList);\n    loadMore.classList.remove('is-hidden');\n    loaderEl.classList.add('is-hidden');\n    if (page * 15 >= response.totalHits) {\n      loadMore.classList.add('is-hidden');\n      iziToast.show({\n        title: 'Error',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        messageColor: '#ffffff',\n        timeout: 3000,\n        backgroundColor: '#ef4040',\n      });\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      title: 'Error',\n      message:\n        'An error occurred while fetching images. Please try again later.',\n      position: 'topRight',\n      messageColor: '#ffffff',\n      timeout: 3000,\n      backgroundColor: '#ef4040',\n    });\n    loaderEl.classList.add('is-hidden');\n    loadMore.classList.add('is-hidden');\n  }\n});\n\nloadMore.addEventListener('click', async event => {\n  page += 1;\n  const response = await imagesFetch(valueSearch, page);\n  scrollTo(galleryList);\n  createMarcup(response.hits, galleryList);\n  if (page * 15 >= response.totalHits) {\n    loadMore.classList.add('is-hidden');\n    iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n      messageColor: '#ffffff',\n      timeout: 3000,\n      backgroundColor: '#ef4040',\n    });\n  }\n});\n\nfunction scrollTo(galleryList) {\n  setTimeout(() => {\n    const { height: cardHeight } =\n      galleryList.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }, 500);\n}\n"],"names":["BASE_URL","KEY","IMAGE_TYPE","ORIENTATION","SAFESEARCH","PER_PAGE","imagesFetch","value","page","data","axios","error","gallery","SimpleLightbox","createMarcup","list","tag","marcup","image","searchForm","galleryList","loaderEl","loadMore","valueSearch","event","iziToast","response","scrollTo","cardHeight"],"mappings":"owBAEA,MAAMA,EAAW,2BACXC,EAAM,qCACNC,EAAa,QACbC,EAAc,aACdC,EAAa,GACbC,EAAW,GAEV,eAAeC,EAAYC,EAAOC,EAAM,CAC7C,GAAI,CACF,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMC,EAAM,IAC3B,GAAGV,CAAQ,QAAQC,CAAG,MAAMM,CAAK,eAAeL,CAAU,gBAAgBC,CAAW,eAAeC,CAAU,SAASI,CAAI,aAAaH,CAAQ,EACtJ,EACI,OAAOI,CACR,OAAQE,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CCfA,MAAMC,EAAU,IAAIC,EAAe,eAAe,EAErCC,EAAe,CAACC,EAAMC,IAAQ,CACzC,MAAMC,EAASF,EACZ,IAAIG,GACI;AAAA,wCAC2BA,EAAM,aAAa;AAAA,sCACrBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,sBAItDA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,sBAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,sBAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,sBAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,YAKhC,EACA,KAAK,EAAE,EACVF,EAAI,mBAAmB,YAAaC,CAAM,EAC1CL,EAAQ,QAAO,CACjB,EC7BMO,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAW,SAAS,cAAc,WAAW,EACnD,IAAId,EAAO,EACPe,EAAc,GAElBJ,EAAW,iBAAiB,SAAU,MAAMK,GAAS,CAKnD,GAJAA,EAAM,eAAc,EAEpBD,EAAcC,EAAM,OAAO,SAAS,YAAY,MAAM,OAElD,CAACD,EAAa,CAChBH,EAAY,UAAY,GACxBK,EAAS,KAAK,CACZ,QAAS,uCACT,SAAU,WACV,QAAS,IACT,MAAO,KACb,CAAK,EACD,MACD,CAEDL,EAAY,UAAY,GACxBC,EAAS,UAAU,OAAO,WAAW,EACrCb,EAAO,EACP,GAAI,CACF,MAAMkB,EAAW,MAAMpB,EAAYiB,EAAaf,CAAI,EAKpD,GAHAW,EAAW,YAAY,MAAQ,GAC/BC,EAAY,UAAY,GAEpB,CAACM,EAAS,KAAK,OAAQ,CACzBD,EAAS,KAAK,CACZ,QACE,2EACF,SAAU,WACV,QAAS,IACT,MAAO,KACf,CAAO,EACDH,EAAS,UAAU,IAAI,WAAW,EAClCF,EAAY,UAAY,GACxBC,EAAS,UAAU,IAAI,WAAW,EAClC,MACD,CAEDP,EAAaY,EAAS,KAAMN,CAAW,EACvCE,EAAS,UAAU,OAAO,WAAW,EACrCD,EAAS,UAAU,IAAI,WAAW,EAC9Bb,EAAO,IAAMkB,EAAS,YACxBJ,EAAS,UAAU,IAAI,WAAW,EAClCG,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,6DACT,SAAU,WACV,aAAc,UACd,QAAS,IACT,gBAAiB,SACzB,CAAO,EAEJ,OAAQd,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBc,EAAS,MAAM,CACb,MAAO,QACP,QACE,mEACF,SAAU,WACV,aAAc,UACd,QAAS,IACT,gBAAiB,SACvB,CAAK,EACDJ,EAAS,UAAU,IAAI,WAAW,EAClCC,EAAS,UAAU,IAAI,WAAW,CACnC,CACH,CAAC,EAEDA,EAAS,iBAAiB,QAAS,MAAME,GAAS,CAChDhB,GAAQ,EACR,MAAMkB,EAAW,MAAMpB,EAAYiB,EAAaf,CAAI,EACpDmB,EAASP,CAAW,EACpBN,EAAaY,EAAS,KAAMN,CAAW,EACnCZ,EAAO,IAAMkB,EAAS,YACxBJ,EAAS,UAAU,IAAI,WAAW,EAClCG,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,WACV,aAAc,UACd,QAAS,IACT,gBAAiB,SACvB,CAAK,EAEL,CAAC,EAED,SAASE,EAASP,EAAa,CAC7B,WAAW,IAAM,CACf,KAAM,CAAE,OAAQQ,CAAY,EAC1BR,EAAY,kBAAkB,wBAChC,OAAO,SAAS,CACd,IAAKQ,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,EAAE,GAAG,CACR"}